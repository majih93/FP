# 5장

핵심 내용

- 압묵적 입출력을 제거해서 재사용하기 좋은 코드를 만들어본다.
- 복잡하게 엉킨 코드를 풀어 더 좋은 구조로 만드는 방법을 배운다.

## 비즈니스 요구사항과 설계를 맞추기.

`gets_free_shipping()` 함수의 비즈니스 요구사항은, 장바구니에 담긴 제품을 주문할 때 무료 배송인지 확인하는 것이다.

하지만 현재의 구현은 비즈니스 요구사항에 맞지 않는 부분이 있다.

```javascript
// '장바구니'로 무료 배송을 확인하는 것이 아니라, 제품의 합계와 가격으로 확인하고 있음.
function get_free_shipping(total, item_price) {
  return total + item_price >= 20;
}

// 위 함수를 cart를 받는 함수로 변경해보자.
// 그리고 계산 로직은 이미 존재하는 함수 calc_total로 대체하여 중복을 줄인다.
function get_free_shipping(cart) {
  return calc_total(cart) >= 20;
}
```

한 가지 바로 이해되지 않는 설명은, 기존 총액과 새로운 제품의 가격을 받는 것 대신 cart를 전달하는 것이 비즈니스 로직에 더 맞는 변경사항이라는 것의 근거 중 하나가 `장바구니는 정자상거래에서 많이 사용하는 엔터티 타입이기 때문이다`라는 점.

- `엔터티`: 업무에 필요하고 유용한 정보를 저장하고 관리하기 위한 집합적인 것.
- 장바구니라는 엔터티가, 통상적으로 사람들이 '장바구니란 ~한 기능을 하는 데이터의 집합이다` 라는 것에 대한 상호이해가 있기 때문에 좋다 라는 것일까?
  - 장바구니에 대해서 사람들이 기대하는 기능 및 처리가 어느정도 동일할 것이기 때문에 그렇다는것인가

## 원칙

> 암묵적 입력과 출력은 적을수록 좋다.

암묵적 입력과 출력이 있다는 것은 다른 컴포넌트와 강하게 결합이 되어 있다는 의미.

그리고 다른 곳에서 사용할 수 없기 때문에, `모듈`이라고 볼 수 없음.

조심해서 사용해야 하며(아무 때나 실행할 수 없음.), 테스트하기도 어렵다.

## 계산 분류하기

의미가 있는 계층을 알아보기 위해서 계산을 분류했다고 했는데

`의미가 있는 계층`이라는 것이 뭘까?

지금 단계에서는 이렇게 이해된다. 여러 코드 조각(모음)이 있을 때, 이를 유의미하게 분류할 수 있는 기준이 되는 그 무언가 아닐까?

그러면 이렇게 유의미하게 분리해야되는 이유가 뭘까?
-> 8, 9장에서 관련된 내용을 다룬다고 한다.

내 생각에는 일단 코드를 중구난방으로 쓰기 보다는, `이 코드는 이런 것과 연관이 있다` 이런 맥락에서 도움이 되지 않을까 싶다.

그래서 관련 있는 코드끼리는 모아두거나 할 수 있기도 하고, 관련 있는 코드들끼리 또 최적화를 할 수도 있지 않을까?

또한 분류가 애매하다 -> 개선할 여지가 있는 코드이다 라고도 해석할 수 있을 것 같다.

주관적인 영역이라 어렵지만, 상황에 따라 적용해볼만한 기준이라고 보면 될 것 같음.
